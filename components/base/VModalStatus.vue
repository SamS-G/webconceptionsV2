<script setup lang="ts">
import type { ModalStatusProps } from '~/interfaces/contact-form'

const emit = defineEmits(['close'])
withDefaults(
  defineProps<ModalStatusProps>(),
  {
    visible: false,
    status: 'success',
    successMessage: 'Operation successful !',
    errorMessage: 'An error occurred. Please try again.',
    successTitle: 'Success',
    errorTitle: 'Error',
  },
)
</script>

<template>
  <div
    v-if="visible"
    class="toast show"
    :class="{
      spinner: status === 'spinner',
      success: status === 'success',
      error: status === 'error',
    }"
    role="alert"
    aria-live="assertive"
    aria-atomic="true"
  >
    <!-- Spinner -->
    <div
      v-if="status === 'loading'"
      class="spinner"
    />
    <div class="content-body d-flex justify-content-between w-100">
      <!-- Success -->
      <div
        v-if="status === 'success'"
        class="success"
      >
        <div class="icon me-4">
          <i class="badge-check d-flex">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="35px"
              height="35px"
              viewBox="0 0 35 35"
            >
              <g id="surface1">
                <path
                  style=" stroke:none;fill-rule:nonzero;fill:#14A44D;fill-opacity:1;"
                  d="M 12.050781 0.886719 C 11.09375 1.230469 10.582031 1.921875 9.632812 4.128906 C 9.195312 5.148438 8.8125 5.578125 8.195312 5.742188 C 8.054688 5.78125 7.371094 5.871094 6.671875 5.945312 C 4.804688 6.144531 4.183594 6.34375 3.597656 6.925781 C 2.816406 7.703125 2.699219 8.761719 3.179688 10.730469 C 3.546875 12.230469 3.542969 12.804688 3.160156 13.355469 C 3.054688 13.507812 2.570312 13.972656 2.070312 14.402344 C 0.609375 15.652344 0.0820312 16.414062 0.0195312 17.347656 C -0.046875 18.230469 0.355469 18.96875 1.46875 20.027344 C 3.144531 21.621094 3.324219 21.820312 3.40625 22.160156 C 3.5 22.539062 3.445312 23.035156 3.179688 24.210938 C 3.082031 24.621094 2.972656 25.238281 2.933594 25.574219 C 2.753906 26.972656 3.21875 28.011719 4.253906 28.519531 C 4.800781 28.785156 5.324219 28.902344 6.714844 29.050781 C 8.175781 29.210938 8.292969 29.230469 8.628906 29.402344 C 9.003906 29.59375 9.195312 29.886719 9.78125 31.207031 C 10.433594 32.667969 10.683594 33.09375 11.175781 33.558594 C 11.71875 34.0625 12.066406 34.207031 12.785156 34.207031 C 13.550781 34.207031 14.027344 34.042969 15.15625 33.386719 C 16.585938 32.550781 16.980469 32.382812 17.5 32.382812 C 18.027344 32.382812 18.328125 32.503906 19.484375 33.1875 C 20.910156 34.042969 21.617188 34.296875 22.394531 34.226562 C 22.984375 34.1875 23.496094 33.914062 23.960938 33.421875 C 24.410156 32.929688 24.628906 32.550781 25.210938 31.226562 C 25.472656 30.644531 25.777344 30.023438 25.910156 29.84375 C 26.257812 29.332031 26.648438 29.210938 28.335938 29.050781 C 30.257812 28.867188 31.136719 28.53125 31.652344 27.789062 C 32.230469 26.945312 32.253906 26.152344 31.773438 24 C 31.65625 23.488281 31.5625 22.851562 31.5625 22.585938 C 31.554688 22.148438 31.574219 22.074219 31.789062 21.746094 C 31.929688 21.511719 32.355469 21.089844 32.929688 20.597656 C 33.429688 20.164062 34.003906 19.625 34.195312 19.394531 C 34.890625 18.550781 35.128906 17.710938 34.898438 16.910156 C 34.664062 16.105469 34.195312 15.515625 32.59375 14.0625 C 31.652344 13.199219 31.546875 13.007812 31.601562 12.148438 C 31.625 11.796875 31.734375 11.101562 31.847656 10.59375 C 32.230469 8.90625 32.191406 8.03125 31.683594 7.265625 C 31.152344 6.464844 30.234375 6.109375 28.234375 5.945312 C 27.214844 5.863281 26.605469 5.734375 26.265625 5.523438 C 25.9375 5.324219 25.667969 4.894531 25.226562 3.820312 C 24.671875 2.507812 24.433594 2.089844 23.972656 1.59375 C 23.476562 1.058594 23.023438 0.828125 22.375 0.773438 C 21.582031 0.710938 20.898438 0.964844 19.277344 1.914062 C 17.617188 2.898438 17.398438 2.898438 15.757812 1.933594 C 13.796875 0.777344 12.980469 0.546875 12.050781 0.886719 Z M 13.46875 2.679688 C 13.636719 2.746094 14.21875 3.070312 14.765625 3.382812 C 17.144531 4.757812 17.929688 4.757812 20.296875 3.355469 C 21.429688 2.6875 21.78125 2.527344 22.15625 2.527344 C 22.441406 2.527344 22.503906 2.554688 22.714844 2.800781 C 22.851562 2.945312 23.121094 3.402344 23.316406 3.808594 C 24.390625 6.0625 24.398438 6.070312 24.808594 6.515625 C 25.527344 7.28125 26.167969 7.5 28.21875 7.691406 C 29.503906 7.8125 29.875 7.902344 30.160156 8.183594 C 30.40625 8.414062 30.453125 8.789062 30.324219 9.433594 C 30.261719 9.714844 30.125 10.390625 30.011719 10.9375 C 29.769531 12.113281 29.75 12.726562 29.941406 13.351562 C 30.195312 14.15625 30.570312 14.609375 32.339844 16.214844 C 33.019531 16.828125 33.222656 17.125 33.222656 17.492188 C 33.222656 17.957031 32.949219 18.285156 31.535156 19.53125 C 29.6875 21.144531 29.476562 21.976562 30.179688 24.8125 C 30.480469 26.039062 30.480469 26.421875 30.179688 26.789062 C 29.957031 27.054688 29.46875 27.171875 27.882812 27.34375 C 26.488281 27.492188 26.074219 27.589844 25.476562 27.910156 C 24.726562 28.308594 24.246094 29.003906 23.515625 30.761719 C 22.90625 32.222656 22.667969 32.503906 22.039062 32.457031 C 21.757812 32.429688 21.527344 32.339844 20.972656 32.027344 C 18.839844 30.816406 18.683594 30.742188 17.84375 30.625 C 16.980469 30.5 16.261719 30.734375 14.71875 31.636719 C 13.5625 32.3125 13.171875 32.492188 12.832031 32.492188 C 12.375 32.492188 12.046875 32.054688 11.484375 30.726562 C 10.746094 28.96875 10.21875 28.253906 9.359375 27.828125 C 8.824219 27.570312 8.277344 27.453125 6.898438 27.316406 C 5.515625 27.171875 5.078125 27.0625 4.828125 26.78125 C 4.636719 26.570312 4.636719 26.558594 4.667969 25.984375 C 4.691406 25.660156 4.804688 24.964844 4.929688 24.4375 C 5.113281 23.636719 5.15625 23.335938 5.15625 22.625 C 5.160156 21.773438 5.160156 21.773438 4.902344 21.230469 C 4.695312 20.792969 4.53125 20.582031 3.980469 20.035156 C 3.617188 19.671875 3.070312 19.160156 2.769531 18.894531 C 2.042969 18.25 1.8125 17.917969 1.8125 17.507812 C 1.8125 17.042969 2.011719 16.789062 3.097656 15.8125 C 4.503906 14.558594 4.859375 14.109375 5.101562 13.296875 C 5.257812 12.726562 5.203125 11.785156 4.921875 10.5625 C 4.800781 10.035156 4.691406 9.335938 4.667969 9.015625 C 4.636719 8.441406 4.636719 8.429688 4.828125 8.214844 C 5.078125 7.9375 5.515625 7.828125 6.898438 7.683594 C 8.3125 7.539062 8.824219 7.429688 9.414062 7.144531 C 10.253906 6.726562 10.671875 6.144531 11.484375 4.273438 C 11.882812 3.355469 12.039062 3.0625 12.296875 2.773438 C 12.613281 2.425781 12.851562 2.40625 13.46875 2.679688 Z M 13.46875 2.679688 "
                />
                <path
                  style=" stroke:none;fill-rule:nonzero;fill:#14A44D;fill-opacity:1;"
                  d="M 22.984375 12.796875 C 22.867188 12.886719 21.238281 14.621094 19.375 16.664062 L 15.984375 20.378906 L 15.730469 20.226562 C 12.304688 18.203125 11.867188 17.957031 11.59375 17.929688 C 11.253906 17.894531 11.027344 18.003906 10.816406 18.320312 C 10.597656 18.648438 10.636719 19.078125 10.910156 19.351562 C 11.164062 19.589844 15.605469 22.214844 15.921875 22.296875 C 16.453125 22.449219 16.433594 22.46875 20.378906 18.167969 C 22.386719 15.980469 24.082031 14.121094 24.152344 14.035156 C 24.734375 13.300781 23.734375 12.257812 22.984375 12.796875 Z M 22.984375 12.796875 "
                />
              </g>
            </svg>
          </i>
        </div>
        <div class="d-flex justify-content-between w-100">
          <div>
            <h5 class="fw-bold mb-1">
              {{ successTitle }}
            </h5>
            <p class="text-muted mb-0">
              {{ successMessage }}
            </p>
          </div>
        </div>
      </div>
      <!-- Error -->
      <div
        v-if="status === 'error'"
        class="error"
      >
        <div class="icon me-4">
          <i class="cross-circle d-flex">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="35px"
              height="35px"
              viewBox="0 0 35 35"
            >
              <g id="surface1">
                <path
                  style=" stroke:none;fill-rule:nonzero;fill:rgb(85.09804%,1.568628%,16.078432%);fill-opacity:1;"
                  d="M 16.203125 0.046875 C 13.609375 0.292969 11.683594 0.839844 9.503906 1.949219 C 6.917969 3.265625 4.601562 5.34375 2.90625 7.859375 C 2.195312 8.925781 1.320312 10.726562 0.894531 11.996094 C 0.5625 13.023438 0.289062 14.191406 0.125 15.347656 C 0.0078125 16.152344 0.0078125 18.847656 0.125 19.652344 C 0.410156 21.667969 0.945312 23.433594 1.777344 25.121094 C 2.714844 27.035156 3.636719 28.320312 5.15625 29.84375 C 6.664062 31.347656 7.972656 32.285156 9.808594 33.1875 C 11.09375 33.816406 11.921875 34.125 13.226562 34.453125 C 16.644531 35.316406 20.078125 35.152344 23.414062 33.96875 C 24.4375 33.605469 26.203125 32.714844 27.105469 32.113281 C 29.167969 30.734375 31.023438 28.832031 32.363281 26.726562 C 32.855469 25.957031 33.648438 24.316406 33.96875 23.40625 C 35.574219 18.878906 35.292969 14.027344 33.183594 9.78125 C 32.335938 8.074219 31.382812 6.726562 30.050781 5.351562 C 28.589844 3.835938 27.113281 2.761719 25.191406 1.8125 C 23.167969 0.8125 21.28125 0.273438 19.039062 0.0664062 C 18.339844 0.0078125 16.761719 -0.0078125 16.203125 0.046875 Z M 19.925781 2.386719 C 24.261719 3.117188 27.933594 5.507812 30.339844 9.1875 C 31.5 10.949219 32.292969 13.035156 32.65625 15.277344 C 32.820312 16.324219 32.820312 18.675781 32.65625 19.722656 C 31.917969 24.289062 29.414062 28.074219 25.53125 30.523438 C 23.871094 31.566406 21.863281 32.304688 19.722656 32.65625 C 18.667969 32.820312 16.324219 32.820312 15.277344 32.648438 C 11.882812 32.09375 9.078125 30.679688 6.691406 28.300781 C 4.335938 25.957031 2.898438 23.117188 2.34375 19.722656 C 2.179688 18.675781 2.179688 16.324219 2.34375 15.277344 C 3.0625 10.855469 5.402344 7.191406 9.066406 4.742188 C 11.15625 3.34375 13.679688 2.46875 16.269531 2.226562 C 17.007812 2.160156 19.128906 2.253906 19.925781 2.386719 Z M 19.925781 2.386719 "
                />
                <path
                  style=" stroke:none;fill-rule:nonzero;fill:rgb(85.09804%,1.568628%,16.078432%);fill-opacity:1;"
                  d="M 11.546875 11.15625 C 11.09375 11.414062 10.898438 11.988281 11.074219 12.488281 C 11.117188 12.589844 12.230469 13.765625 13.554688 15.085938 L 15.960938 17.5 L 13.554688 19.90625 C 12.230469 21.230469 11.117188 22.40625 11.074219 22.511719 C 10.890625 23.007812 11.074219 23.515625 11.546875 23.835938 C 11.800781 24.007812 12.167969 24.042969 12.488281 23.925781 C 12.59375 23.882812 13.769531 22.769531 15.09375 21.445312 L 17.5 19.039062 L 19.914062 21.445312 C 21.234375 22.769531 22.410156 23.882812 22.511719 23.925781 C 23.394531 24.246094 24.246094 23.390625 23.925781 22.511719 C 23.886719 22.40625 22.769531 21.230469 21.445312 19.90625 L 19.039062 17.5 L 21.445312 15.085938 C 22.769531 13.765625 23.886719 12.589844 23.925781 12.488281 C 24.109375 11.988281 23.898438 11.410156 23.449219 11.148438 C 23.167969 10.992188 22.710938 10.957031 22.46875 11.082031 C 22.386719 11.121094 21.234375 12.234375 19.914062 13.554688 L 17.5 15.960938 L 15.09375 13.554688 C 13.769531 12.230469 12.59375 11.113281 12.488281 11.074219 C 12.1875 10.964844 11.8125 10.992188 11.546875 11.15625 Z M 11.546875 11.15625 "
                />
              </g>
            </svg>
          </i>
        </div>
        <div class="d-flex justify-content-between w-100">
          <div>
            <h5 class="fw-bold mb-1">
              {{ errorTitle }}
            </h5>
            <p class="text-muted mb-0">
              {{ errorMessage }}
            </p>
          </div>
        </div>
      </div>
      <!-- VButton -->
      <div
        v-if="status !== 'loading'"
      >
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="toast"
          aria-label="Close"
          @click="emit('close')"
        />
      </div>
    </div>
  </div>
</template>

<style scoped>
.spinner {
  border-bottom: 4px solid #B2D7FF;
  border-left: 4px solid #9AB4D2;
  border-right: 4px solid #9AB4D2;
  border-top: 4px solid #B2D7FF;
  border-radius: 100%;
  height: 32px;
  width: 32px;
  animation: spin .6s infinite linear;
  text-indent: 999em;
  bottom: 3.5% !important;
  left: 45% !important;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
}

.success, .error {
  display: flex;
  min-width: 0;
}

.icon i {
  font-size: 35px;
}

.toast.success {
  border: 2px solid #14A44D !important;
}

.badge-check svg, .cross-circle svg {
  filter: none;
}

.toast.error {
  border: 2px solid #D90429 !important;
}

.toast {
  position: absolute;
  bottom: 20%;
  left: 2%;
  background-color: #EBEBEC;
  padding: 1rem;
  width: max-content;
}
</style>
